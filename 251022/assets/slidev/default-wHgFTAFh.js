import{d as A,r as k,O as E,L as I,z as _,E as x,f as y,o as S,j as v}from"../modules/vue-qxyk4ZZ6.js";import{ai as b,C as K,aj as N,ak as $,al as j,_ as q}from"../index-CPUYaqV2.js";import{u as B}from"./context-EWs4oCGw.js";const O=A({__name:"KaTexBlockWrapper",props:{ranges:{type:Array,default:()=>[]},finally:{type:[String,Number],default:"last"},startLine:{type:Number,default:1},at:{type:[String,Number],default:"+1"}},setup(c){const e=c,{$clicksContext:s}=B(),o=k(),g=b();return E(()=>{s.unregister(g)}),I(()=>{if(!s||!e.ranges?.length)return;const a=s.calculateSince(e.at,e.ranges.length-1);s.register(g,a);const i=_(()=>a?Math.max(0,s.current-a.start+1):K),d=_(()=>e.finally==="last"?e.ranges.at(-1):e.finally.toString());x(()=>{if(!o.value)return;let u=e.ranges[i.value]??d.value;const p=u==="hide";o.value.classList.toggle(N,p),p&&(u=e.ranges[i.value+1]??d.value);const h=o.value.querySelectorAll(".mtable > [class*=col-align]");if(!h)return;const L=Array.from(h).map(n=>Array.from(n.querySelectorAll(":scope > .vlist-t > .vlist-r > .vlist > span > .mord"))),r=[];for(const n of L)n.forEach((l,t)=>{l&&(Array.isArray(r[t])?r[t].push(l):r[t]=[l])});const m=e.startLine,C=$(r.length+m-1,u);r.forEach((n,l)=>{const t=C.includes(l+m);n.forEach(f=>{f.classList.toggle(j,!0),f.classList.toggle("highlighted",t),f.classList.toggle("dishonored",!t)})})})}),(a,i)=>(S(),y("div",{ref_key:"el",ref:o,class:"slidev-katex-wrapper"},[v(a.$slots,"default")],512))}}),M={},P={class:"slidev-layout default"};function R(c,e){return S(),y("div",P,[v(c.$slots,"default")])}const V=q(M,[["render",R]]);export{V as I,O as _};
