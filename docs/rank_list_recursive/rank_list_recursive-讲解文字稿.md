欢迎回到Hans的频道
我们必须想象，做题人是幸福的
今天分享如何用manim制作带递归的从夯到拉锐评视频
如果你之前看过我之前两期的manim教学视频
那么写出这期视频的代码会轻松不少
首先我们来拆解视频标题的句子结构
如果你已经熟悉递归算法，这一部分可以跳过
一段代码胜过千言万语
屏幕中间的代码非常清晰地展示了标题是怎么拼接出来的
在浏览器中按下F12，打开开发者工具
切到Console栏，粘贴代码，按回车，就能看到运行结果
f1含有1个锐评和1个从夯到拉，f2是2个，f3是3个
不难发现规律：下标是几，“锐评”和“从夯到拉”就各出现几次
实际上，标题这句话的语序是调整过的
原始的语序是：从夯到拉锐评某某
这种语序当然也支持递归
但它还能看成是循环生成的，递归味就没那么重了
所以视频标题没有采用这种语序
留个小作业：分析下这句话：
给给视频评夯评拉完了给到NPC

接下来开始看代码
首先我们需要生成多个背景，为做出递归效果做准备
第一个问题是：生成多少个背景？
找规律就能确定
普通的锐评某某从夯到拉，只需要1个背景
锐评锐评某某从夯到拉从夯到拉，需要2个背景
不难发现规律：标题句子里出现n个“从夯到拉”，就需要n个背景
之前的视频已经介绍过如何写代码生成从夯到拉的背景图
直接找一个网站截图，然后提示词有话直说
让通义千问帮忙用manim复刻就行
但生成效果只是看着像回事
古法手作调整细节的过程可以看我之前的视频
当时没有把生成背景的代码封装成函数
这里为了生成多个背景，封装了函数draw_rank_list_bg
为此，我们还需要在manim提供的setup方法里添加些全局变量
后续代码会反反复复用到这些变量

接下来写代码处理和上期视频一样的从夯到拉评价过程
这期视频要展示不少技术栈的图标
那怎么快速、方便地获取这些图标资源呢？
直接问DeepSeek老师，就查到了这个叫devicon的开源项目
里面有很多技术栈的图标，而且都是svg格式，太香了
不过加载图标时踩了坑：Vite的图标含有渐变色
加载到manim里无法正常显示颜色
我不想在这里浪费太多时间
直接Chrome打开svg图标，然后截图，简单粗暴
Image M object继承M object，但SVG M object继承VM object
所以想打包的多个元素包含Image M object时
只能用Group，不能用V Group
为了节省时间，我们希望一次展示多个技术栈图标
首先确定它们的初始位置关系
像左下角的代码这样，先移动第一个展示的图标到
能让图标群看着顺眼的位置
再根据各个图标的大小来确定后续的每个图标在哪些图标的旁边
这里只有自己不断改代码，编译看效果
如果希望图标群居中，就像右下角的代码这样，打包成Group就OK
然后是让图标依次入场，用到manim的LaggedStart类
lag ratio=0.3表示在前一个动画运行30%时，下一个动画开始

和上期视频一样
这里希望让素材一边缩小到一行矩形的高度
一边移动到排行榜的正确位置
这部分代码和上期视频大同小异
但对于第一个前往这一行的图标，我们有一个新问题
需要先确定画面最上层的背景
这里确定出来是bg5，原因在后面会讲
取标签矩形的4号下标表示把图标排到“拉完了”
另外，我们预先打包了一个V Group
为后续对当前背景进行排名做准备
