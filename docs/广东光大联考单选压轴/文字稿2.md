欢迎回到汉斯的频道
我们必须想象，做题人是幸福的
首先说说考场上的速通技巧
我们要考完再细细品味这题
根据对称性，盲猜取到正n边形时就是答案
但正n边形情况的值并不好算
那就看看正三角形和正方形吧
建系时利用对称性可以减小计算量
不难算出正三角形的值为9，正方形的值为16
直接盲猜答案n方，跑路~

接下来开始好好品味这题！
首先是法1，直接设点
写出目标函数和约束方程
这个目标函数显然不打开括号就没法往下做
于是打开括号，得到屏幕上加粗的式子
式子为了节省空间
用了个对高中生来说可能有点陌生的求和记号
这个求和记号就是取遍每一个有序的二元组i，j
比如n=3时取二元组2，1，3，1，3，2
下面就不得不用到注意力了
n项的完全平方公式对很多高中生来说有点陌生
但如果学过初中数学竞赛，应该会比较熟悉
这里的思想就是
n项的完全平方公式天然含有每一个x i乘x j的项
我们看n=2的情况，直接用最常规的完全平方公式就行

那我们自然会猜测，n=3用3项的完全平方公式
发现x1+x2+x3的平方天然含有x1x2，x1x3和x2x3
于是一般情况用n项的完全平方公式
发现x1加到xn的平方天然含有每一个x i乘x j的项
也就是屏幕中间加粗的式子
令x1加到xn和y1加到yn都为0，就得到了最大值
但是，等等…
这里的等号真的能取到吗？

别着急，我们通过三角换元法来讲清楚
这里的等号取到时是什么情况
法2和法1没有本质区别，只是把约束方程隐去了
我们直接把法1最后一步的式子换成三角函数
这里的cosine求和和sine求和能同时为0吗？
回顾刚刚讲的逃课技巧，我们直接猜测：
取正n边形就能同时满足这两个等式

下面开始证我们盲猜的结论
我们小学二年级就学过，根据对称性
圆内接正n边形两个相邻点和圆心的夹角是2π比n
那就不难写出每个点和x轴正方向的夹角，显然构成等差数列
根据对称性，建系时令其中一点在x轴上
比如a1=0，计算会更简单
但我之前讲长郡大题造火箭的那道三角压轴题时
推过一个很NB的技巧
直接把公差2π比n代入屏幕下方加粗的式子
发现两个式子确实都是0，也就证毕了

OK，终于来到我真正想讲的解法3了
注意力涣散能不能做这题呢？
可以的
显然这是一个条件极值问题
并且目标函数和约束方程都是多元多项式
所以直接考虑用拉格朗日乘数法+Grobner基来做
大佬们可以直接用拉格朗日乘数法分析这题
但我不想动笔算
这里就要用到经典的CTF Crypto技能包——SageMath了
我之前用这个技能包破解过一道高中钓鱼题
当时非常详细地介绍了这个科技
如果想看懂后面的内容，强烈建议去看看

首先是许愿环节，直接试试LLM的实力！
很遗憾，LLM偷懒了，只写了求Grobner基的代码糊弄我
回代的代码是一点没写
我有不祥的预感，回代工作大概不简单
还有两个现象让我感觉到写代码解这题不容易
第一，实测只有指定按字典序来排
并且规定x i小于y i小于λ i，才能顺利消元
得到一元多项式，原因不明
第二，实测指定n=5，跑Grobner基的时间就不可忍受了

然后我又反复许愿
LLM终于写出屏幕下方展示的回代代码，但是报错了
把报错扔给LLM，LLM给的解决方案纯属AI幻觉
很遗憾，LLM挑战失败，接下来要自己debug
我们以n=4为例讲讲回代要做的事
λ3字典序最大，所以Grobner基最后一个元素是关于λ3的方程
解这个方程，得到λ3的多个解
遍历每一个解，代入Grobner基的倒数第二个元素，就能解出λ2
继续代入倒数第三个元素，就能解出λ1，以此类推
最理想的情况就是倒序遍历完以后，所有变量都解出来了
知道星辰大海的坐标后，我们来看看现在遇到的阻碍
单看屏幕里展示的代码，你能猜到这个报错的原因吗

既然报错提到了key，那我们就从current solution变量的键类型入手
回顾代码，一开始current solution有lambda n-1
回代后会加入remaining var
我们发现这两个变量的类型不同
导致current solution的键有两种类型
所以g sub这行代码会报错
这个bug隐蔽就隐蔽在，虽然它们的类型不同
但因为重载了等于运算符，所以它们仍然是可以相等的
知道原因就好解决了
直接遍历变量列表，用等于运算符匹配出我们要的新变量就行
注意，这里不能用index方法去匹配，因为它们的类型不同
回代完成后，很遗憾，只有λ成功解出来，其他变量都没解出
这是因为Grobner基里所有跟x、y有关的变量都是纠缠在一起的
那接下来该怎么办呢？

那就代入求出的λ值，再求一次Grobner基！
直接复制之前LLM生成的代码，稍微修改一下
duang！

我们发现，n=3和n=4都是4个解
全0解都表示所有点都重合，我们不关心
前两行都表示有一个点被孤立，其他点重合
可能是鞍点也可能是局部极值点，但不是我们感兴趣的最值点
第三行就是我们熟悉的正n边形情况了，取得最大值

最后我又试着新增一条约束
利用对称性，让第一个点在x轴上
发现n=3时直接解出了所有点
但n=4时，结果并没有提升

这里是完整代码传送门
代码差不多有200行，但非常容易理解！
最后再次邀请大佬们直接用拉格朗日乘数法分析下这题

我是汉斯，我正致力于为做题人的精神自留地添砖加瓦
如果你觉得这个视频的解题思路足够清晰自然
对注意力涣散人群友好
别忘了一键三连哦
谢谢观看~
