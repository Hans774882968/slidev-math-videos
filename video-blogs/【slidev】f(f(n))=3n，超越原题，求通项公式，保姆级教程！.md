---
theme: dracula
mdc: true
transition: slide-left
class: text-center
tags:
  - 嵌套函数
  - 数学归纳法
---

<SlidevPageRedirector />
<MovingWatermark />

## f(f(n))=3n，超越原题，求通项公式，保姆级教程！

题源：《高中数学竞赛培优教程一试》第四版《函数的综合应用》赛题演练P11（第61页）

作者： **hans7**

**我们必须想象，做题人是幸福的**

文字稿传送门：见视频简介

“这题都没做过，那人生真是白活了！”

---

## 题干

设函数 $f: N^+ \rightarrow N^+$ 且严格单调递增， $f(f(n)) = 3n$ ，求通项公式

简化版1：求 $f(1)+f(9)+f(36)$

简化版2：（25年济南一模递增数列压轴， [题源](https://www.bilibili.com/video/BV1GTZ5YmEmm) ）已知递增数列各项均为正整数且 $a_{a_{n}}=3n$ 则

<div class="flex gap-5 problem-options">

A. $a_{a_{1}}=3$

B. $a_{n}>n$

C. $a_{5}=6$

D. $a_{2025}=81a_{25}$

</div>

<div class="h-40 flex justify-center items-center text-2xl text-orange">
这么优雅的题都没做过，那人生真是白活了！
</div>

<style>
.problem-options > p {
  margin: 0;
}
</style>

---

## 25年济南一模递增数列压轴

我之前的笔记： https://hans774882968.github.io/teaching-plan-analytic-geometry/blog/25%E5%B9%B4%E6%B5%8E%E5%8D%97%E4%B8%80%E6%A8%A1%E9%80%92%E5%A2%9E%E6%95%B0%E5%88%97%E5%8E%8B%E8%BD%B4%EF%BC%9A%E4%B8%AD%E7%AD%89%E6%95%B0%E5%AD%A6%E5%8E%9F%E9%A2%98

A：代入显然对。

B：假设 $a_{n} \leq n$ 有： $a_{a_{n}} \leq a_{n} \leq n$ ，但 $a_{a_{n}} = 3n > n$ ，矛盾。

C：手推一下。由B， $a_{a_{1}} = 3 > a_{1}$ 。令 $a_{1} = 1$ ，显然不对，所以 $a_{1} = 2$ ，进而推出 $a_{a_{1}}=a_{2}=3$ 。然后 $a_{a_{2}} = 6 = a_{3}$，和C矛盾。

D：我们注意到 $2025 = 81*25 = 3^4*25$ ，所以希望得到 $a_{3n}$ 和 $a_{n}$ 的关系。突破口在：多嵌套1层。设 $a_{n} = t$ 则 $a_{a_{n}} = a_{t} = 3n$ ， $a_{a_{a_{n}}} = a_{3n} = a_{a_{t}} = 3t$ ，这就得到了 $a_{3n} = 3a_{n}$ 。所以D是对的。**总结**：3层嵌套的两个视角：2+1（ $a_{3n}$ ）=1+2 （ $a_{a_{t}}$ ）

综上，选ABD。

---

## 求通项公式-手推一下~

已知 $a_{1}=2,\ a_{2}=3,\ a_{3}=6$ 。不妨先展示一下怎么进一步手推：

1. $a_{6}=a_{a_{3}}=3*3=9$ ，又数列**严格单增**，于是4到5分别被**夹**成7到8
2. $a_{a_{4}}=a_{7}=12,\ a_{a_{5}}=a_{8}=15$
3. 由 $a_{3n} = 3a_{n}$ ， $a_{9}=3a_{3}=18$
4. $a_{18}=a_{a_{9}}=27$ ，数值差27-18等于下标差18-9，于是10到17分别被夹成19到26
5. 用 $a_{a_{10}}$ 到 $a_{a_{17}}$ 分别推出 $a_{19}$ 到 $a_{26}$ 为30到51
6. 由 $a_{3n} = 3a_{n}$ ， $a_{27}=3a_{9}=54$
7. 以此类推…

---

## 求通项公式-列表

| 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   | 10  | 11  | 12  | 13  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 2   | 3   | 6   | 7   | 8   | 9   | 12  | 15  | 18  | 19  | 20  | 21  | 22  |

| 14  | 15  | 16  | 17  | 18  | 19  | 20  | 21  | 22  | 23  | 24  | 25  | 26  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 23  | 24  | 25  | 26  | 27  | 30  | 33  | 36  | 39  | 42  | 45  | 48  | 51  |


| 27  | 28  | 29  | 30  | 31  | 32  | 33  | 34  | 35  | 36  | 37  | 38  | 39  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 54  | 55  | 56  | 57  | 58  | 59  | 60  | 61  | 62  | 63  | 64  | 65  | 66  |

你发现了什么规律？

<div
  v-click
  v-motion
  :initial="{ opacity: 0, y: 50 }"
  :enter="{ opacity: 1, y: 0 }"
>

$n \in [3^k,2*3^k]$ ，每次增长1，$n \in [2*3^k,3^{k+1}]$ ，每次增长3

顺便：《一试》 $f(1)+f(9)+f(36)=2+18+63=83$
</div>

---

## 通项公式

$$
\begin{cases}
a_{3^k}=2*3^k,\ k \geq 0 \\
a_{n}=n+3^k,\ 3^k\leq n\leq 2*3^k \\
a_{n}=3(n-2*3^k)+3^{k+1}=3n-3^{k+1},\ 2*3^k\leq n\leq 3^{k+1}
\end{cases}
$$

1. $n=3^k$ ：我们知道 $a_{1}=2$ ，以及 $a_{3n}=3a_{n}$ ，不难得到这个式子
2. $3^k\leq n\leq 2*3^k$ ：由“1”，我们知道 $a_{a_{3^k}}=a_{2*3^k}=3^{k+1}$ ，而 $a_{2*3^k}-a_{3^k}=3^{k+1}-2*3^k=3^k$ 刚好等于下标差 $2*3^k-3^k=3^k$ ，又数列**严格单增**，于是中间的每一项都被夹住了
3. $2*3^k\leq n\leq 3^{k+1}$ ：受手推过程启发，思路仍然是**多嵌套一层**。注意到“2”的通项公式是加 $3^k$ ，所以我们设 $t=n-3^k$ ，于是由“2”得 $a_{t}=n$ ，再套一层得 $a_{n}=a_{a_{t}}=3t=3(n-3^k)=3n-3^{k+1}$

注：严谨的解题过程要写成**数学归纳法**。假设 $k=x$ 时通项公式成立，然后 $k=x+1$ 时依次证明1~3成立

---
layout: center
class: text-center
---

# 后记

<span class="text-orange font-bold">为做题人的精神自留地添砖加瓦</span>

<span class="text-pink font-bold border border-pink px-2 py-1 rounded-lg">喜欢本期视频的话，别忘了一键三连喔</span>

谢谢观看~
